<!doctype html>
<html lang="sv">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>EPA 7 - Leda ett arbetslag</title>
  <style>
:root{
  --bg: #f3f4f4;
  --surface: #f0f1f2;
  --surface-2: #ffffff;
  --border: #dcddde;
  --text: #37352f;
  --muted: #626161;
  --soft: #9a9a99;
  --teal: #0684bd;
  --teal-ink: #dceef7;
  --blue-ink: #e0e8ff;
  --orange-ink: #fde8dc;
  --red-ink: #fce0dd;
  --shadow: 0 2px 8px rgba(0,0,0,0.08);
  --r-lg: 12px;
  --r-md: 8px;
  --pill: 999px;
}
*{box-sizing:border-box;margin:0;padding:0}
body{
  font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
  background: var(--bg);
  color: var(--text);
  padding: 24px 16px;
}
.page{max-width:1200px;margin:0 auto}
.header{display:flex;flex-direction:column;gap:12px;margin-bottom:22px}
.header-top{display:flex;justify-content:space-between;align-items:flex-start;gap:16px}
.kicker{font-size:12px;letter-spacing:.16em;text-transform:uppercase;color:var(--teal)}
.h1{font-size:28px;font-weight:650;letter-spacing:-.03em;line-height:1.15;color:var(--text)}
.meta-row{display:flex;gap:10px;flex-wrap:wrap;font-size:12px}
.meta-pill{display:inline-flex;gap:8px;align-items:center;border:1px solid var(--border);background:var(--surface);padding:6px 10px;border-radius:var(--pill)}
.meta-label{font-size:10px;letter-spacing:.16em;text-transform:uppercase;color:var(--soft)}
.meta-value{color:var(--text);font-weight:500}

.grid{display:grid;grid-template-columns:1fr;gap:18px}

.card{background:var(--surface-2);border:1px solid var(--border);border-radius:var(--r-lg);padding:16px 18px 18px;box-shadow:var(--shadow)}
.card-title{font-size:13px;font-weight:650;text-transform:uppercase;letter-spacing:.14em;color:var(--soft);margin-bottom:10px}

/* dropdown instructions */
.dropdown-toggle{
  background:none;
  border:none;
  color:var(--teal);
  cursor:pointer;
  font-size:13px;
  font-weight:700;
  padding:0;
  text-align:left;
  display:flex;
  align-items:center;
  gap:8px;
  width:100%;
}
.dropdown-toggle::before{
  content:"▶";
  display:inline-block;
  transition:transform 0.2s;
  font-size:11px;
}
.dropdown-toggle.open::before{
  transform:rotate(90deg);
}
.dropdown-content{
  display:none;
  margin-top:12px;
}
.dropdown-content.open{
  display:block;
}

.info-text{color:var(--text);font-size:13px;line-height:1.45}
.info-text h3{font-size:13px;font-weight:700;margin:10px 0 6px;color:var(--text)}
.info-text h3:first-child{margin-top:0}
.info-text p{margin:6px 0;}
.info-text ul{margin:6px 0 0 18px;color:var(--text)}
.info-text li{margin:4px 0}

/* ST buttons */
.toolbar{display:flex;gap:10px;flex-wrap:wrap;margin-top:6px}
.btn-year{
  border:1px solid var(--border);
  background:var(--surface-2);
  color:var(--text);
  border-radius:var(--pill);
  padding:8px 12px;
  font-size:13px;
  font-weight:650;
  cursor:pointer;
  box-shadow:var(--shadow);
  display:inline-flex;
  align-items:center;
  gap:8px;
}
.btn-year:hover{filter:brightness(0.98)}
.btn-year.active{
  border-color:rgba(6,132,189,.45);
  box-shadow:0 0 0 4px rgba(6,132,189,.18),var(--shadow);
}
.dot{width:10px;height:10px;border-radius:50%;display:inline-block}

/* competencies */
.block{background:var(--surface-2);border:1px solid var(--border);border-radius:var(--r-lg);padding:14px 16px;margin-bottom:12px}
.block-title{font-size:14px;font-weight:700;margin-bottom:8px}

.epa-item{
  background:var(--surface-2);
  border:1px solid var(--border);
  border-radius:var(--r-md);
  padding:10px 12px;
  margin-top:8px;
}
.epa-item-head{display:flex;justify-content:space-between;gap:10px;align-items:flex-start}
.epa-competency{font-size:13.5px;font-weight:650;line-height:1.35}
.badge{
  border:1px solid var(--border);
  background:var(--surface);
  padding:3px 8px;
  border-radius:var(--pill);
  font-size:12px;
  color:var(--muted);
  white-space:nowrap;
}
.epa-meta{
  margin-top:4px;
  font-size:12px;
  color:var(--muted);
}
.desc{
  margin-top:6px;
  padding-left:18px;
  font-size:13px;
  color:var(--muted);
}
.desc li{margin-top:3px}
  </style>
</head>
<body>
  <div class="page">
    <div class="header">
      <div class="header-top">
        <div>
          <div class="kicker">EPA 7</div>
          <div class="h1">Leda ett arbetslag</div>
        </div>
      </div>

      <div class="meta-row">
        <div class="meta-pill">
          <span class="meta-label">EPA</span>
          <span class="meta-value">7 - Leda ett arbetslag</span>
        </div>
      </div>
    </div>

    <div class="grid">
      <!-- Instruktioner dropdown -->
      <div class="card">
        <button class="dropdown-toggle" id="toggleBtn" onclick="toggleDropdown()">Instruktioner</button>
        <div class="dropdown-content" id="dropdownContent">
          <div class="info-text">
            <h3>Ledning av arbetslag på akuten och prehospitalt</h3>
            <p>Fungera som ledare för arbetslaget/teamet i det vardagliga arbetet på akutmottagningen, prehospitalt, på larmrummet samt fungera som driftsansvarig läkare. Kunna inneha dessa positioner under olika omständigheter såsom vid normalt flöde, extremt högt flöde, stabsläge, förstärkningsläge och katastrofläge. Kunna leda katastrofarbete.</p>
            <p>Kompetenser från tidigare EPA (1-6) ligger som grund för denna EPA och kommer inte upprepas här. Denna EPA fokuserar på flöden och prioriteringar och eventuella upprepningar har således detta fokus till skillnad från tidigare EPA.</p>

            <h3>Huvudsakliga områden:</h3>
            <ul>
              <li>leda teamet på akutmottagningen och ansvarig för patientflödet inom teamet</li>
              <li>leda teamet prehospitalt</li>
              <li>leda arbetet på larmrummet</li>
              <li>leda arbetet och flödet på hela akutmottagningen (driftansvar)</li>
              <li>leda arbetet i extremflöden inklusive katastrofsammanhang</li>
              <li>leda arbetet vid resursbrist</li>
            </ul>

            <h3>Exempel på färdigheter som ingår i denna EPA:</h3>
            <ul>
              <li>kunna hantera multipla patienter samtidigt</li>
              <li>kunna hantera multipla kollegor med olika utbildningsnivåer samtidigt</li>
              <li>tydlig och rak kommunikation</li>
            </ul>
          </div>
        </div>
      </div>

      <!-- ST filter -->
      <div class="card">
        <div class="card-title">ST</div>
        <div class="toolbar">
          <button class="btn-year" id="btnLight" type="button">
            <span class="dot" style="background:#d7e3bc"></span>År 1–2
          </button>
          <button class="btn-year" id="btnYellow" type="button">
            <span class="dot" style="background:#ffd400"></span>År 3–4
          </button>
          <button class="btn-year" id="btnDark" type="button">
            <span class="dot" style="background:#00b050"></span>År 5
          </button>
        </div>
      </div>

      <div id="content"></div>
    </div>
  </div>

  <script>
    function toggleDropdown() {
      const btn = document.getElementById("toggleBtn");
      const content = document.getElementById("dropdownContent");
      btn.classList.toggle("open");
      content.classList.toggle("open");
    }

    // STATIC data extracted from epa7.xlsx (EPA 7)
    const DATA = [{"section":"Anamnes och status","level":"Nivå 3","year_band":"dark","competency":"Snabbt kunna bedöma och fördela nya patienter vid trängselsituationer","descriptors":["Utb Klinisk tjänstgöring","Bed 360 grader"]},{"section":"Anamnes och status","level":"Nivå 4","year_band":"dark","competency":"Skapa en lämplig plan för masstriagering och skaffa fram fler resurser vid information om kommande stort inflöde eller stor olycka","descriptors":["Utb teamledaruUtb Internutbildning, katastrofutbildningtbildning","Bed org & komm DT 5, handledarsamtal"]},{"section":"Anamnes och status","level":"Nivå 1","year_band":"light","competency":"Identifiera akut sjuka patienter som behöver snabb intervention, inte låta triagekö eller diagnostiska svårigheter förhindra snabbt omhändertagande","descriptors":["Utb Klinisk tjänstgöring","Bed Klinisk observation, CBD"]},{"section":"Anamnes och status","level":"Nivå 2","year_band":"yellow","competency":"Kunna prioritera mellan patienter och uppgifter","descriptors":["Bed Klinisk observation, CBD","Bed Handledarsamtal"]},{"section":"Anamnes och status","level":"Nivå 3","year_band":"dark","competency":"Kunna växla mellan det akuta omhändertagandet av sjuka patienter och patienter med lägre prioritering, inte dröja sig kvar hos en kritisk sjuk patient längre än nödvändigt","descriptors":["Utb Klinisk tjänstgöring","Bed Feedback från team, 360 grader"]},{"section":"Anamnes och status","level":"Nivå 4","year_band":"dark","competency":"Felsöka och arbeta runt oförutsedda svårigheter i genomförandet av patientplanen (försenade provsvar, avsaknad av material, transportproblem mm)","descriptors":["Utb Klinisk tjänstgöring, inskolning LL","Bed 360 grader, skriftlig feedback från kollegor och medarbetare"]},{"section":"Övrig datainsamling inklusive prov","level":"Nivå 1","year_band":"light","competency":"Säkerställa att nödvändiga diagnostiska och terapeutiska interventioner sker på ett tidseffektivt sätt.","descriptors":["Utb Klinisk tjänstgöring","Bed 360 grader"]},{"section":"Övrig datainsamling inklusive prov","level":"Nivå 2","year_band":"yellow","competency":"Använda sjukhusets övriga resurser och resurser inom verksamheten på ett lämpligt sätt för att assistera i patientomhändertagandet (UL vs rtg, bedside rtg vs åka till rtg, använda fysioterapeuter, patientnära prov vs lab)","descriptors":["Utb Klinisk tjänstgöring","Bed Handledarsamtal, CBD"]},{"section":"Differentialdiagnostik och sannolikhetsbedömning","level":"Nivå 1","year_band":"light","competency":"Använda konsulter och övriga resurser vid rätt tid och rätt tillfälle","descriptors":["Utb Klinisk tjänstgöring","Bed HL-samtal, instruktionshandledning med feedback"]},{"section":"Differentialdiagnostik och sannolikhetsbedömning","level":"Nivå 2","year_band":"yellow","competency":"Behärska risk–nytta värdering för olika handläggningsalternativ ur ett medicinskt, etiskt och logistiskt perspektiv samt ur ett patientsäkerhetsperspektiv för patienter i alla åldrar","descriptors":["Utb Klinisk tjänstgöring, handledarsamtal, etik-kurs","Bed feedback från medarbetare efter arbetat pass"]},{"section":"Utredning och initial behandling","level":"Nivå 1","year_band":"light","competency":"Ordinera i tid efter att ha sett patienten","descriptors":["Utb Klinisk tjänstgöring","Bed feedback från ssk efter arbetat pass"]},{"section":"Utredning och initial behandling","level":"Nivå 2","year_band":"yellow","competency":"Ordinera adekvat monitorering av en patient under akutvistelsen samt evaluera effekt av given behandling","descriptors":["Utb Klinisk tjänstgöring","Bed 360 grader"]},{"section":"Utredning och initial behandling","level":"Nivå 3","year_band":"dark","competency":"Uppmärksamma dröjsmål i patientomhändertagandet, undersöka orsaken och hitta lösningar","descriptors":["Utb handledarsamtal, inskolning LL","Bed 360 grader, feedback från team-ssk eller lednings-ssk"]},{"section":"Disposition","level":"Nivå 1","year_band":"light","competency":"Kunna förutse om patienten ska läggas in eller inte tidigt i förloppet och börja arbeta för detta","descriptors":["Utb Klinisk tjänstgöring","Bed Feedback från teamläkare och teamssk"]},{"section":"Disposition","level":"Nivå 2","year_band":"yellow","competency":"Inse när patienter behöver monitoreras och re-evalueras över en längre tid på akuten t.ex observation på en korttidsenhet/observationsenhet","descriptors":["Utb Klinisk tjänstgöring, handledarsamtal","Bed Feedback från instruktionshandledare och team-ssk"]},{"section":"Disposition","level":"Nivå 3","year_band":"dark","competency":"Föreslå lämplig vårdnivå","descriptors":["Utb Klinisk tjänstgöring","Bed CBD"]},{"section":"Disposition","level":"Nivå 1","year_band":"light","competency":"Skriva hem patienter i tid när utredningen är klar på akuten","descriptors":["Utb Klinisk tjänstgöring","Bed Feedback från medarbetare"]},{"section":"Disposition","level":"Nivå 2","year_band":"yellow","competency":"Ansvara för beslutsfattande inom teamet","descriptors":["Utb Klinisk tjänstgöring som teamläkare/ Flödesansvarig läkare, klinisk tjänstgöring som teamleader på larm","Bed Observation på larm, ledarskapsbedömning på larm och på team"]},{"section":"Disposition","level":"Nivå 4","year_band":"dark","competency":"Känna igen när medarbetare, eller team, når sin maxkapacitet och ingripa för att balansera och fördela arbetsbelastningen.","descriptors":["Utb Klinisk tjänstgöring, inskolning LL","Bed 360 grader, feedback från lednings-ssk"]},{"section":"Kommunikation","level":"Nivå 1","year_band":"light","competency":"Kommunicera relevant information avseende akut sjuka patienter till ssk och usk samt ange akuticitetsgrad för diagnostiska och terapeutiska interventioner","descriptors":["Utb HL-samtal, klinisk tjänstgöring","Bed handledarsamtal"]},{"section":"Kommunikation","level":"Nivå 2","year_band":"yellow","competency":"Regelbundet kommunicera med teammedlemmar under patientens vistelse på akuten så att arbetet går framåt på ett effektivt sätt","descriptors":["Utb klinisk tjänstgöring","Bed Medsittning, 360 graders bed"]},{"section":"Kommunikation","level":"Nivå 3","year_band":"dark","competency":"Kommunicera effektivt med lednings-ssk och sjukhusledning för att optimera flödet på akuten vid trängsel","descriptors":["Utb inskolning LL, klinisk tjänstgöring som LL under handledning","Bed feedback från drifts-ssk, 360 grader"]},{"section":"Kommunikation","level":"Nivå 4","year_band":"dark","competency":"Leda arbetet och delegera uppgifter på ett respektfullt och professionellt sätt, fungera som en positiv förebild, skapa en öppen och engagerande arbetsmiljö samt representera verksamhetens mål och värdering","descriptors":["Utb Ledarskapsutb, handledarutb, LL-utb","Bed medarbetarsamtal med chef, 360 grader"]},{"section":"Kommunikation","level":"Nivå 2","year_band":"yellow","competency":"Tillhandahålla prehospital rådgivning","descriptors":["Utb ambulansmedåkning, arbeta som LL","Bed feedback från ambulanspersonal"]},{"section":"Kommunikation","level":"Nivå 3","year_band":"dark","competency":"Kommunicera effektivt med personal utanför sjukhuset (SOS, ambulans, räddningstjänst, polis) vid katastrofsituationer för att få en förståelse för förväntad patientanströmning","descriptors":["Utb Katastrofutbildning, internutbildning","Bed Org & Komm DT 5"]},{"section":"Kommunikation","level":"Nivå 4","year_band":"dark","competency":"Kommunicera med massmedia eller mediaansvarig inom verksamheten","descriptors":["Utb ledarskapsutbildning","Bed handledarsamtal"]},{"section":"Kommunikation","level":"Nivå 2","year_band":"yellow","competency":"Kunna hantera värdekonflikter i det dagliga arbetet","descriptors":["Utb ledarskapsutbildning, handledarutbildning","Bed 360 gr, medarbetarsamtal med chef, handledarsamtal"]},{"section":"Övrigt","level":"Nivå 1","year_band":"light","competency":"Bidra till att effektivisera akutens flöde genom att fördela rum och resurser som behövs (t.ex flytta ut patienter som inte behöver övervakning i väntrum eller korridor)","descriptors":["Utb klinisk tjänstgöring","Bed feedback från teamansvarig"]},{"section":"Övrigt","level":"Nivå 2","year_band":"yellow","competency":"Hantera flera patienter samtidigt (ex. 4-5), balansera noggrannhet och effektivitet för individuella patienter samt kunna växla mellan uppgifter tidseffektivt.","descriptors":["Utb klinisk tjänstgöring","Bed 360 gr, daglig utvärdering av team"]},{"section":"Övrigt","level":"Nivå 3","year_band":"dark","competency":"Demonstrera situationsmedvetenhet och kunna anpassa patienthandläggning samt handledning till akutens belastningsnivå.","descriptors":["Utb klinisk tjänstgöring","Bed feedback från team efter belastade arbetspass"]},{"section":"Övrigt","level":"Nivå 4","year_band":"dark","competency":"Hitta lösningar till flaskhalsar eller vid högt flöde och omorgansiera arbetet.","descriptors":["Utb inskolning LL, klinisk tjänstgöring som LL under handledning","Bed feedback efter LL-pass"]},{"section":"Övrigt","level":"Nivå 1","year_band":"light","competency":"Arbeta vårdekonomiskt så att resursfördelning gagnar rätt patienter vid rätt tid.","descriptors":["Utb klinisk tjänstgöring","Bed 360 gr"]},{"section":"Övrigt","level":"Nivå 2","year_band":"yellow","competency":"Hantera och prioritera (eller fördröja) störningar och avbrott på ett professionellt sätt och kan växla mellan uppgifter när så behövs","descriptors":["Utb klinisk tjänstgöring","Bed Handledarsamtal"]},{"section":"Övrigt","level":"Nivå 3","year_band":"dark","competency":"Handleda och utbilda studenter och utbildningsläkare (AT/BT/ST) samtidigt som man handlägger flertalet patienter","descriptors":["Utb Handledarutbildning, ledarskapsutb","Bed feedback från adepter efter pass"]},{"section":"Övrigt","level":"Nivå 4","year_band":"dark","competency":"Kunna sköta en signifikant del av akuten eller hela akuten genom att delegera arbete, växla mellan uppgifter och vara medveten om förändringar i flödet och oväntade händelser under arbetspasset","descriptors":["Utb inskolning LL, klinisk tjänstgöring som LL under handledning","Bed 360 gr från hela teamet, ledarskapsbedömning"]},{"section":"Övrigt","level":"Nivå 2","year_band":"yellow","competency":"Känna till sjukhusets och regionens vårdorganisation under normala förhållanden","descriptors":["Utb Ledarskapsutb","Bed Handledarsamtal"]},{"section":"Övrigt","level":"Nivå 3","year_band":"dark","competency":"Känna till sjukhusets och regionens katastroforganisation","descriptors":["Utb Ledarskapsutb","Bed Handledarsamtal"]}];

    const yearOrder = { light: 1, yellow: 2, dark: 3 };
    const yearLabel = { light: "År 1–2", yellow: "År 3–4", dark: "År 5" };

    const content = document.getElementById("content");
    const btnLight = document.getElementById("btnLight");
    const btnYellow = document.getElementById("btnYellow");
    const btnDark = document.getElementById("btnDark");

    function setActive(btn) {
      [btnLight, btnYellow, btnDark].forEach(b => b.classList.remove("active"));
      btn.classList.add("active");
    }

    function esc(s) {
      return String(s ?? "")
        .replaceAll("&","&amp;")
        .replaceAll("<","&lt;")
        .replaceAll(">","&gt;");
    }

    function render(maxYear) {
      const filtered = DATA.filter(r => yearOrder[r.year_band] <= maxYear);

      const bySection = {};
      filtered.forEach(r => {
        (bySection[r.section] ??= []).push(r);
      });

      const sections = Object.keys(bySection).sort((a,b) => a.localeCompare(b,"sv"));
      const levelRank = { "Nivå 1":1, "Nivå 2":2, "Nivå 3":3, "Nivå 4":4 };

      let out = "";
      for (const section of sections) {
        const items = bySection[section]
          .slice()
          .sort((a,b) =>
            (levelRank[a.level] - levelRank[b.level]) ||
            (yearOrder[a.year_band] - yearOrder[b.year_band]) ||
            a.competency.localeCompare(b.competency,"sv")
          );

        out += `<div class="block epa-section">`;
        out += `<div class="block-title">${esc(section)}</div>`;

        for (const item of items) {
          const dotColor =
            item.year_band === "light" ? "#d7e3bc" :
            item.year_band === "yellow" ? "#ffd400" :
            "#00b050";

          out += `<div class="epa-item">`;
          out += `  <div class="epa-item-head">`;
          out += `    <div class="epa-competency"><span class="dot" style="background:${dotColor};margin-right:8px"></span>${esc(item.competency)}</div>`;
          out += `    <div class="badge">${esc(item.level)}</div>`;
          out += `  </div>`;
          out += `  <div class="epa-meta">${esc(yearLabel[item.year_band])}</div>`;

          if (item.descriptors && item.descriptors.length) {
            out += `<ul class="desc">`;
            item.descriptors.forEach(d => {
              String(d).split(/\n+/).filter(Boolean).forEach(line => {
                out += `<li>${esc(line.trim())}</li>`;
              });
            });
            out += `</ul>`;
          }

          out += `</div>`;
        }

        out += `</div>`;
      }

      content.innerHTML = out || `<div class="block"><div class="block-title">Inga kompetenser matchar filtret.</div></div>`;
    }

    btnLight.addEventListener("click", () => { setActive(btnLight); render(1); });
    btnYellow.addEventListener("click", () => { setActive(btnYellow); render(2); });
    btnDark.addEventListener("click", () => { setActive(btnDark); render(3); });

    // initial view
    setActive(btnLight);
    render(1);
  </script>
</body>
</html>
